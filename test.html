<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <style>
        .checkerboard{
            display: grid;
            grid-template-columns: repeat(3, 80px);
            grid-template-rows: repeat(3, 80px);
        }
        .checkerboard > div{
            border: 1px solid #dddeee;
            text-align: center;
            line-height: 80px;
            font-size: 40px;
            cursor: pointer;
        }
    </style>
    <div id="aaa" class="checkerboard">
        <div id="1-1"></div>
        <div id="1-2"></div>
        <div id="1-3"></div>
        <div id="2-1"></div>
        <div id="2-2"></div>
        <div id="2-3"></div>
        <div id="3-1"></div>
        <div id="3-2"></div>
        <div id="3-3"></div>
    </div>
    
    <script>
        let nowPlayer = 1
        const player1Cells = []
        const player2Cells = []
        document.getElementById('aaa').addEventListener('click',() => {
            if(event.target.innerHTML){
                return
            }
            if(nowPlayer % 2 === 1){
                event.target.innerHTML = 'O'
                player1Cells.push(event.target.id)
                event.target.style.color="red"
                checkWin(player1Cells,nowPlayer)
            }else{
                event.target.innerHTML = 'X'
                player2Cells.push(event.target.id)
                event.target.style.color="blue"
                checkWin(player2Cells,nowPlayer)
            }
            nowPlayer++
        })
        function checkWin(arr,i){
            setTimeout(() => {
                let flag = false;
                [1,2,3].forEach(item => {
                    if(arr.filter(a => a.split('-')[0] == item).length === 3){
                        flag = true
                    }
                    if(arr.filter(a => a.split('-')[1] == item).length === 3){
                        flag = true
                    }
                })
                if(arr.filter(a => a == '1-1' || a == '2-2' || a == '3-3').length == 3){
                        flag = true
                    }
                    if(arr.filter(a => a == '1-3' || a == '2-2' || a == '3-1').length == 3){
                        flag = true
                    }
                if(flag){
                    alert(`玩家${i % 2 == 1 ? 1 : 2}赢了`)
                }
            }, 0);
            }
    </script>
</body>
</html>