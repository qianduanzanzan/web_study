<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas width="800" height="800" id="c" style="border: 1px solid #ccc;"></canvas>
    <script src="js/fabric.js"></script>
    <script>
        const canvas = new fabric.Canvas('c')

        const rect = new fabric.Rect({
            top: 740, // 距离容器顶部 30px
            left: 30, // 距离容器左侧 30px
            width: 100, // 宽 100px
            height: 60, // 高 60px
            fill: 'red' // 填充 红色
        })
        canvas.add(rect)
        var a = null
        var fangxiang = 'top'
        window.addEventListener('keydown', e => {
            switch(e.code){
                case 'ArrowUp':
                    fangxiang = 'top'
                    if(!a){
                        animate()
                    }
                    setTimeout(() => {
                        cancelAnimationFrame(a)
                        a = null
                    }, 10);
            }
        })
        function animate() {
                a = requestAnimationFrame( animate );
                rect[fangxiang] -= 1
                canvas.add(rect)
        }
        // animate()
    </script>
</body>
</html>